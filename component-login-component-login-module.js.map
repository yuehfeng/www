{"version":3,"sources":["./src/app/component-login/component-login-routing.module.ts","./src/app/component-login/forget-password/forget-password.component.ts","./src/app/component-login/forget-password/forget-password.component.html","./src/app/component-login/component-login.module.ts","./src/app/component-login/login/login.component.ts","./src/app/component-login/login/login.component.html","./src/app/component-login/sign/sign.component.ts","./src/app/component-login/sign/sign.component.html"],"names":[],"mappings":";;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuD;AAC+B;AAC7B;AACH;;;AAEtD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,qEAAc;KAC1B;IACD;QACE,IAAI,EAAE,MAAM;QACZ,SAAS,EAAE,kEAAa;KACzB;IACD;QACE,IAAI,EAAE,QAAQ;QACd,SAAS,EAAE,kGAAuB;KACnC;CACF,CAAC;AAMK,MAAM,2BAA2B;;sGAA3B,2BAA2B;0GAA3B,2BAA2B;8GAH7B,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;mIAEX,2BAA2B,uFAF5B,4DAAY;;;;;;;;;;;;;;;;;AChBjB,MAAM,uBAAuB;IAElC,gBAAgB,CAAC;IAEjB,QAAQ;IACR,CAAC;;8FALU,uBAAuB;uGAAvB,uBAAuB;QCPpC,yEAA6B;QACzB,qEAAI;QACA,yEACJ;QAAA,4DAAK;QACT,4DAAM;;;;;;;;;;;;;;ACHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AAEgC;AACtB;AAC6B;AAChC;AACT;AACe;;AAerD,MAAM,oBAAoB;;wFAApB,oBAAoB;mGAApB,oBAAoB;uGANtB;YACP,4DAAY;YACZ,2FAA2B;YAC3B,0DAAW;SACZ;mIAEU,oBAAoB,mBAX7B,qEAAc;QACd,kGAAuB;QACvB,kEAAa;QACb,wEAAe,aAGf,4DAAY;QACZ,2FAA2B;QAC3B,0DAAW;;;;;;;;;;;;;ACjBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;;;;;;;;ICCnC,0EAAgF;IAC5E,qEAAI;IAAC,uDAAkC;IAAA,4DAAK;IAC5C,uEAAM;IAAA,yEAAI;IAAA,4DAAO;IACjB,wEAA2B;IAAA,+OAA8B;IAAA,4DAAI;IAC7D,wEAA2B;IAAA,oPAAkD;IAAA,4DAAI;IACjF,wEAA2B;IAAA,2QAA0C;IAAA,4DAAI;IAC7E,4DAAM;;;IALG,0DAAkC;IAAlC,8GAAkC;;;IAM3C,0EAAoE;IAChE,qEAAI;IAAC,uDAAkC;IAAA,4DAAK;IAChD,4DAAM;;;IADG,0DAAkC;IAAlC,8GAAkC;;;IAT/C,sEAAyC;IACrC,kHAMM;IACN,iHAEM;IACV,4DAAM;;;IAVI,0DAAgC;IAAhC,mGAAgC;IAOhC,0DAAiC;IAAjC,oGAAiC;;ADGxC,MAAM,cAAc;IAevB,YACY,aAA4B,EAC5B,WAAwB,EACxB,gBAAkC,EAClC,gBAAkC;QAHlC,kBAAa,GAAb,aAAa,CAAe;QAC5B,gBAAW,GAAX,WAAW,CAAa;QACxB,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAlB9C,YAAO,GAAW,EAAE,CAAC;QAGrB,iBAAY,GAAW,EAAE,CAAC;QAC1B,gCAA2B,GAAW,EAAE,CAAC;QACzC,+BAA0B,GAAY,KAAK,CAAC;QAE5C,cAAS,GAAG;YACR,MAAM,EAAE,KAAK;YACb,GAAG,EAAE,EAAE;YACP,QAAQ,EAAE,EAAE;YACZ,KAAK,EAAE,KAAK;SACf;QAQG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACjD,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAED,QAAQ;QAEJ,IAAI,CAAC,2BAA2B,GAAG,EAAE,CAAC;IAC1C,CAAC;IAED,YAAY;QAER,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,eAAe,EAAE;aACtC,IAAI,CACD,0DAAG,CAAC,OAAO,CAAC,EAAE,CACV,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CACZ,iBAAG,GAAG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAK,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAG,CAC/C,CACJ,EACD,0DAAG,CAAC,IAAI,CAAC,EAAE,CACX,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CACZ,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,YAAY,CAC9B,CACA,CACJ;aACA,SAAS,CAAC,GAAG,CAAC,EAAE;YACb,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;YACpB,+BAA+B;YAC/B,IAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAC3B;gBACI,OAAO;gBACP,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;gBAC7B,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;gBAC5D,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;gBACtD,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBAElD,QAAQ;gBACR,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;gBACvC,IAAI,CAAC,2BAA2B,GAAG,QAAQ,CAAC;gBAC5C,sCAAsC;gBACtC,yDAAyD;gBAEzD,WAAW;gBACX,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,EAAC,IAAI,EAAE,GAAG,EAAC,CAAC,CAAC;gBACnE,kDAAkD;aACrD;iBAED;gBACI,OAAO;gBACP,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,CAAC;gBAC9B,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,EAAE,CAAC;gBAC7B,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC;gBAExB,QAAQ;gBACR,IAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;gBACxC,IAAI,CAAC,2BAA2B,GAAG,SAAS,CAAC;aAChD;QACL,CAAC,CAAC;IACV,CAAC;IAED,QAAQ;QAEJ,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,eAAe,EAAE;aACtC,IAAI,CACD,0DAAG,CAAC,OAAO,CAAC,EAAE,CACV,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CACZ,iBAAG,GAAG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAK,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAG,CAC/C,CACJ,EACD,0DAAG,CAAC,IAAI,CAAC,EAAE,CACP,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CACZ,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,OAAO,CACzB,CACJ,CACJ;aACA,SAAS,CAAC,GAAG,CAAC,EAAE;YACb,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;YACpB,IAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAC3B;gBACI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;gBAC7B,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;gBAC5D,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;gBACtD,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;aACrD;QACL,CAAC,CAAC;IACV,CAAC;;4EA1GQ,cAAc;8FAAd,cAAc;QCd3B,qEAAI;QAAA,gGAAO;QAAA,4DAAK;QAEhB,yEAAsB;QAClB,0GAWM;QACV,4DAAM;QAEN,yEAA8E;QAC1E,yEAAmD;QAC/C,yEAAsB;QAClB,yEAA6B;QACzB,yEAAoB;QAChB,qEAAI;QAAA,gGAAM;QAAA,4DAAK;QACnB,4DAAM;QACV,4DAAM;QACN,0EAA8D;QAC1D,4EAAc;QAAA,oFAAI;QAAA,4DAAQ;QAC1B,4EAA8E;QAA7B,yLAA4B;QAA7E,4DAA8E;QAClF,4DAAM;QACN,0EAA6B;QACzB,0EAAoB;QAChB,8EAA0D;QAAzB,uIAAS,kBAAc,IAAC;QAAC,wEAAE;QAAA,4DAAS;QACzE,4DAAM;QACV,4DAAM;QACN,0EAAsB;QAClB,2EAAmC;QAC/B,yEAAmC;QAAA,gGAAM;QAAA,4DAAI;QAC7C,yEAAiC;QAAA,gGAAM;QAAA,4DAAI;QAC/C,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;QACV,4DAAM;;QAvCI,0DAAiC;QAAjC,iGAAiC;QAwBsB,2DAA4B;QAA5B,qFAA4B;;;;;;;;;;;;;;;;;;ACpBtF,MAAM,aAAa;IAExB,gBAAgB,CAAC;IAEjB,QAAQ;IACR,CAAC;;0EALU,aAAa;6FAAb,aAAa;QCP1B,qEAAI;QAAA,mFAAI;QAAA,4DAAK;QAEb,yEAAwB;QACpB,2EAAc;QAAA,mEAAQ;QAAA,4DAAQ;QAC9B,sEAAK;QACD,sEAEsB;QAC1B,4DAAM;QACV,4DAAM;QACN,yEAA4B;QACxB,yEAA4C;QACxC,iLACJ;QAAA,4DAAM;QACN,0EAAiC;QAC7B,6EAAqC;QAAA,wEAAE;QAAA,4DAAS;QACpD,4DAAM;QACV,4DAAM","file":"component-login-component-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ForgetPasswordComponent } from './forget-password/forget-password.component';\nimport { LoginComponent } from './login/login.component';\nimport { SignComponent } from './sign/sign.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginComponent\n  },\n  {\n    path: 'sign',\n    component: SignComponent\n  },\n  {\n    path: 'forget',\n    component: ForgetPasswordComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ComponentLoginRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-forget-password',\n  templateUrl: './forget-password.component.html',\n  styleUrls: ['./forget-password.component.css']\n})\nexport class ForgetPasswordComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"row text-center\">\n    <h2>\n        笑死\n    </h2>\n</div>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ComponentLoginRoutingModule } from './component-login-routing.module';\nimport { LoginComponent } from './login/login.component';\nimport { ForgetPasswordComponent } from './forget-password/forget-password.component';\nimport { SignComponent } from './sign/sign.component';\nimport { FormsModule } from '@angular/forms';\nimport { LogoutComponent } from './logout/logout.component';\n\n@NgModule({\n  declarations: [\n    LoginComponent,\n    ForgetPasswordComponent,\n    SignComponent,\n    LogoutComponent,\n  ],\n  imports: [\n    CommonModule,\n    ComponentLoginRoutingModule,\n    FormsModule\n  ]\n})\nexport class ComponentLoginModule { }\n","import { Location, LocationStrategy, PlatformLocation } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { CookieService } from 'ngx-cookie-service';\nimport { find, map } from 'rxjs/operators';\nimport { User } from 'src/app/models/user.model';\nimport { UserService } from 'src/app/services/user.service';\nimport { path } from 'src/environments/path.map';\n\n@Component({\n    selector: 'app-login',\n    templateUrl: './login.component.html',\n    styleUrls: ['./login.component.css']\n})\n\nexport class LoginComponent implements OnInit {\n    userKey: string = '';\n    userData?: User[];\n\n    inputUserKey: string = '';\n    inputUserKeyResponseMessage: string = '';\n    inputUserKeyResponseStatus: boolean = false;\n\n    userLogin = {\n        status: false,\n        key: '',\n        nickname: '',\n        admin: false,\n    }\n\n    constructor(\n        private CookieService: CookieService,\n        private UserService: UserService,\n        private PlatformLocation: PlatformLocation,\n        private LocationStrategy: LocationStrategy\n    ){\n        this.userKey = this.CookieService.get('userKey');\n        this.findUser();\n    }\n\n    ngOnInit(): void\n    {\n        this.inputUserKeyResponseMessage = '';\n    }\n\n    requestLogin(): void\n    {\n        this.UserService.getAll().snapshotChanges()\n            .pipe(\n                map(changes => \n                    changes.map(c =>\n                        ({ key: c.payload.key, ...c.payload.val() })\n                    )\n                ),\n                map(data =>\n                data.filter(c =>\n                    c.key === this.inputUserKey\n                )\n                )\n            )\n            .subscribe(res => {\n                this.userData = res;\n                // console.warn(this.userData);\n                if(this.userData.length > 0)\n                {\n                    // 呈現資料\n                    this.userLogin.status = true;\n                    this.userLogin.nickname = String(this.userData[0].nickname);\n                    this.userLogin.admin = Boolean(this.userData[0].root);\n                    this.userLogin.key = String(this.userData[0].key);\n\n                    // 使用者回饋\n                    this.inputUserKeyResponseStatus = true;\n                    this.inputUserKeyResponseMessage = '登入成功!!';\n                    // this.LocationStrategy.replaceState;\n                    // this.LocationStrategy.replaceState(null, '', '/', '');\n\n                    // 設定Cookie\n                    this.CookieService.set('userKey', this.userLogin.key, {path: '/'});\n                    // console.log(this.CookieService.get('userKey'));\n                }\n                else\n                {\n                    // 呈現資料\n                    this.userLogin.status = false;\n                    this.userLogin.nickname = '';\n                    this.userLogin.admin = false;\n                    this.userLogin.key = '';\n                    \n                    // 使用者回饋\n                    this.inputUserKeyResponseStatus = false;\n                    this.inputUserKeyResponseMessage = '錯誤的金鑰!!';\n                }\n            })\n    }\n\n    findUser(): void\n    {\n        this.UserService.getAll().snapshotChanges()\n            .pipe(\n                map(changes => \n                    changes.map(c =>\n                        ({ key: c.payload.key, ...c.payload.val() })\n                    )\n                ),\n                map(data =>\n                    data.filter(c =>\n                        c.key === this.userKey\n                    )\n                )\n            )\n            .subscribe(res => {\n                this.userData = res;\n                if(this.userData.length > 0)\n                {\n                    this.userLogin.status = true;\n                    this.userLogin.nickname = String(this.userData[0].nickname);\n                    this.userLogin.admin = Boolean(this.userData[0].root);\n                    this.userLogin.key = String(this.userData[0].key);\n                }\n            })\n    }\n}\n","<h2>您好，使用者!</h2>\n\n<div class=\"row my-3\">\n    <div *ngIf=\"inputUserKeyResponseMessage\">\n        <div *ngIf=\"inputUserKeyResponseStatus\" class=\"alert alert-success text-center\">\n            <h4> {{ inputUserKeyResponseMessage }} </h4>\n            <span>注意: </span>\n            <p class=\"m-0 p-1 fw-bold\">如果右上角的使用者資訊沒有更新，可以嘗試回到首頁並刷新頁面。</p>\n            <p class=\"m-0 p-1 fw-bold\">在子分頁(如: www/article/1)試圖更新網頁會造成Cookie遺失，請回到首頁重新即可。</p>\n            <p class=\"m-0 p-1 fw-bold\">上架在Github的網頁，除了首頁以外，重新整理會導向404分頁，詳情請見最新消息。</p>\n        </div>\n        <div *ngIf=\"!inputUserKeyResponseStatus\" class=\"alert alert-danger\">\n            <h4> {{ inputUserKeyResponseMessage }} </h4>\n        </div>\n    </div>\n</div>\n\n<div class=\"d-flex justify-content-center\" style=\"width: 100%; height: 50vh;\">\n    <div class=\"d-flex align-items-center text-center\">\n        <div class=\"flex-row\">\n            <div class=\"row text-center\">\n                <div class=\"col-12\">\n                    <h4>輸入您的資料</h4>\n                </div>\n            </div>\n            <div class=\"form-group text-center\" style=\"min-width: 250px;\">\n                <label for=\"\">您的金鑰</label>\n                <input type=\"text\" id=\"key\" class=\"form-control\" [(ngModel)] = \"inputUserKey\">\n            </div>\n            <div class=\"row text-center\">\n                <div class=\"col-12\">\n                    <button  class=\"btn btn-success\" (click)=\"requestLogin()\">登入</button>\n                </div>\n            </div>\n            <div class=\"row my-3\">\n                <div class=\"col-md-12 text-center\">\n                    <a class=\"p-1\" routerLink=\"forget\">忘記金鑰點我</a>\n                    <a class=\"p-1\" routerLink=\"sign\">註冊金鑰點我</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-sign',\n  templateUrl: './sign.component.html',\n  styleUrls: ['./sign.component.css']\n})\nexport class SignComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<h2>註冊資料</h2>\n\n<div class=\"form-group\">\n    <label for=\"\">Nickname</label>\n    <div>\n        <input type=\"text\"\n        class=\"form-control\"\n        placeholder=\"請填入您的暱稱\">\n    </div>\n</div>\n<div class=\"row text-right\">\n    <div class=\"col-md-8 text-right text-muted\">\n        點選註冊就代表您同意我們取得您的IP以及Cookie\n    </div>\n    <div class=\"col-md-4 text-right\">\n        <button class=\"btn btn-success px-5\">註冊</button>\n    </div>\n</div>"],"sourceRoot":"webpack:///"}