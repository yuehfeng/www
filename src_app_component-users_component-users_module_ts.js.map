{"version":3,"sources":["./src/app/component-users/component-users-routing.module.ts","./src/app/component-users/component-users.module.ts","./src/app/component-users/users-add/users-add.component.ts","./src/app/component-users/users-add/users-add.component.html","./src/app/component-users/users-details/users-details.component.ts","./src/app/component-users/users-details/users-details.component.html","./src/app/component-users/users-view/users-view.component.ts","./src/app/component-users/users-view/users-view.component.html"],"names":[],"mappings":"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","file":"src_app_component-users_component-users_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AuthGuard } from '../auth/auth.guard';\nimport { UsersAddComponent } from './users-add/users-add.component';\nimport { UsersDetailsComponent } from './users-details/users-details.component';\nimport { UsersViewComponent } from './users-view/users-view.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UsersViewComponent,\n    canActivate: [AuthGuard],\n  },\n  {\n    path: 'add',\n    component: UsersAddComponent,\n    canActivate: [AuthGuard],\n  },\n  {\n    path: ':key',\n    component: UsersDetailsComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ComponentUsersRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ComponentUsersRoutingModule } from './component-users-routing.module';\nimport { UsersAddComponent } from './users-add/users-add.component';\nimport { UsersDetailsComponent } from './users-details/users-details.component';\nimport { UsersViewComponent } from './users-view/users-view.component';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [\n    UsersAddComponent,\n    UsersDetailsComponent,\n    UsersViewComponent\n  ],\n  imports: [\n    CommonModule,\n    ComponentUsersRoutingModule,\n    FormsModule\n  ]\n})\nexport class ComponentUsersModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { User } from 'src/app/models/user.model';\nimport { UserService } from 'src/app/services/user.service';\n\n@Component({\n    selector: 'app-users-add',\n    templateUrl: './users-add.component.html',\n    styleUrls: ['./users-add.component.css']\n})\nexport class UsersAddComponent implements OnInit {\n    user: User = new User();\n    submitted = false;\n\n    constructor(private UserService: UserService){ }\n\n    ngOnInit(): void \n    {\n\n    }\n\n    saveUser(): void\n    {\n        this.UserService.create(this.user)\n            .then( () => {\n                // console.exception('Created user item successfully!');\n                this.submitted = true;\n            })\n    }\n}\n","<h2>新增使用者</h2>\n\n<div class=\"submit-form\">\n    <div *ngIf=\"submitted\" class=\"p-3 mb-2 border border-3 rounded-2 border-success bg-light text-success\">\n        Submitted Status: {{ submitted }}\n    </div>\n\n    <div class=\"form-group\">\n        <label for=\"Nickname\">Nickname</label>\n        <input type=\"text\"\n        class=\"form-control\"\n        id=\"nickname\"\n        required\n        [(ngModel)] = \"user.nickname\">\n    </div>\n    <div class=\"form-group\">\n        <label for=\"Signin_Date\">Signin Date</label>\n        <input type=\"text\"\n        class=\"form-control\"\n        id=\"signin_date\"\n        required\n        [(ngModel)] = \"user.signin_date\"\n        name=\"signin_date\">\n    </div>\n    <button (click)=\"saveUser()\" class=\"btn btn-success\">Submit</button>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { UserService } from 'src/app/services/user.service';\nimport { User } from 'src/app/models/user.model';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\n\n@Component({\n    selector: 'app-users-details',\n    templateUrl: './users-details.component.html',\n    styleUrls: ['./users-details.component.css']\n})\n\nexport class UsersDetailsComponent implements OnInit {\n    // @Input() user?: User;\n    userData?: User[];\n    keyID ?= '';\n    userRoot = 0;\n\n    constructor(\n        private route: ActivatedRoute,\n        private userService: UserService,\n        private location: Location\n    ) { }\n\n    ngOnInit(): void\n    {\n        // this.userService.getAll();\n        // this.getUser();\n        this.getSingleUser();\n        \n    }\n\n    // getUser(): void\n    // {\n    //   this.keyID = String(this.route.snapshot.paramMap.get('key'));\n        \n    //   this.userService.getSingleUser(this.keyID).snapshotChanges()\n    //     .pipe(\n    //       map(changes => \n    //           changes.map(c =>\n    //               ({ key: c.payload.key, ...c.payload.val() })\n    //           )\n    //       )\n    //     )\n    //     .subscribe(res => {\n    //       this.userData = res;\n    //       console.log(this.userData);\n    //     })\n    \n    //   // .subscribe(res => console.log(res) )\n    //   //   .subscribe(reponse => { console.log(reponse)})\n    //   //   .subscrible(user => this.user = user);\n    // }\n\n    getSingleUser() :void\n    {\n        this.keyID = String(this.route.snapshot.paramMap.get('key'));\n        \n        this.userService.getAll().snapshotChanges()\n        .pipe(\n            map(changes => \n                changes.map(c =>\n                    ({ key: c.payload.key, ...c.payload.val() })\n                )\n            ),\n            map(data =>\n                data.filter(c =>\n                    c.key === this.keyID\n                )\n            )\n        )\n        .subscribe(res => {\n            this.userData = res;\n            this.userRoot = Number(this.userData[0].root);\n        })\n    }\n}\n","<h2>使用者詳細資料</h2>\n<!-- 雖然知道只有一筆資料但為了怕抓空值而出錯，所以跑一個迴圈 -->\n<div *ngIf=\"userRoot\">\n    <a routerLink=\"/user/\">所有使用者</a>\n</div>\n\n<div class=\"container\" *ngFor=\"let item of userData\">\n    <ul class=\"list-group \">\n        <li class=\"list-group-item list-group-item-primary\">\n            <span class=\"fw-bolder\">暱稱</span>\n             {{ item.nickname === undefined ? '無資料' : item.nickname }}\n        </li>\n        <li class=\"list-group-item list-group-item-primary\">\n            <span class=\"fw-bolder\">Cookie</span>\n            {{ item.cookie === undefined ? '無資料' : item.cookie }}\n        </li>\n        <li class=\"list-group-item list-group-item-primary\">\n            <span class=\"fw-bolder\">註冊日期</span>\n            {{ item.signin_date === undefined ? '無資料' : item.signin_date }}\n        </li>\n        <li class=\"list-group-item list-group-item-primary\">\n            <span class=\"fw-bolder\">IP位址</span>\n            {{ item.ipv4 === undefined ? '無資料' : item.ipv4 }}\n        </li>\n        <li class=\"list-group-item list-group-item-primary\">\n            <span class=\"fw-bolder\">權限</span>\n            {{ item.root === 1 ? '管理者' : '一般使用者' }}\n        </li>\n    </ul>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport { User } from 'src/app/models/user.model';\nimport { UserService } from 'src/app/services/user.service';\n\n// 靜態資源\nimport { path } from 'src/environments/path.map';\n\n@Component({\n    selector: 'app-users-view',\n    templateUrl: './users-view.component.html',\n    styleUrls: ['./users-view.component.css']\n})\n\nexport class UsersViewComponent implements OnInit {\n    path = path;\n    userData?: User[];\n    currentUser?: User;\n\n    constructor(private userService: UserService) { }\n\n    ngOnInit(): void\n    {\n        this.retrieveUser();\n    }\n\n    refreshList(): void\n    {\n        this.currentUser = undefined;\n        this.retrieveUser();\n    }\n\n    retrieveUser(): void\n    {\n        this.userService.getAll()\n            .snapshotChanges()\n            .pipe(\n                map(changes => \n                    changes.map(c =>\n                        ({ key: c.payload.key, ...c.payload.val() })\n                    )\n                )\n            )\n            .subscribe(response => {\n                // splice the Array\n                this.userData = response;\n                // console.log(response);\n            });\n    }\n\n    setActiveUser(news: User, index: number): void\n    {\n        this.currentUser = news;\n        // this.currentIndex = index;\n    }\n\n    removeAllUser(): void\n    {\n        this.userService.deleteAll()\n            .then( () => this.refreshList() )\n            .catch(err => console.log(err));\n    }\n}\n","<h2>【管理者】使用者管理</h2>\n\n<div class=\"text-right m-2\">\n    <button [routerLink]=\"[path.users_add]\" class=\"btn btn-primary\">\n        Addition userData\n    </button>\n</div>\n<table class=\"table table-hover   text-center\">\n    <thead>\n        <th>#</th>\n        <th>Key</th>\n        <th>Nickname</th>\n        <th>IPv4</th>\n        <th>Cookie</th>\n        <th>Signin Date</th>\n        <th>Root</th>\n        <th>Manage</th>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let item of userData; index as i;\">\n            <th scope=\"row\">{{ (i+1) }}</th>\n            <td>\n                <a routerLink=\"/user/{{ item.key }}\">{{ item.key }}</a>\n             </td>\n            <td>{{ item.nickname }}</td>\n            <td>{{ item.ipv4 }}</td>\n            <td>{{ item.cookie }}</td>\n            <td>{{ item.signin_date }}</td>\n            <td>{{ item.root }}</td>\n            <td></td>\n\n\n        </tr>\n    </tbody>\n</table>"],"sourceRoot":"webpack:///"}